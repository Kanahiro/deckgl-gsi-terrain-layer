{"version":3,"sources":["../../../src/features/check-glsl-extension.js"],"names":["compiledGlslExtensions","canCompileGLGSExtension","gl","cap","options","feature","WEBGL_FEATURES","extensionName","source","shader","createShader","shaderSource","compileShader","canCompile","getShaderParameter","deleteShader"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AAMA,IAAMA,sBAAsB,GAAG,EAA/B;;AAGe,SAASC,uBAAT,CAAiCC,EAAjC,EAAqCC,GAArC,EAAwD;AAAA,MAAdC,OAAc,uEAAJ,EAAI;AACrE,MAAMC,OAAO,GAAGC,+BAAeH,GAAf,CAAhB;AACA,qBAAOE,OAAP,EAAgBF,GAAhB;;AAEA,MAAI,CAAC,4BAAQC,OAAR,CAAL,EAAuB;AACrB,WAAO,IAAP;AACD;;AAED,MAAID,GAAG,IAAIH,sBAAX,EAAmC;AACjC,WAAOA,sBAAsB,CAACG,GAAD,CAA7B;AACD;;AAED,MAAMI,aAAa,GAAGF,OAAO,CAAC,CAAD,CAA7B;AACA,MAAMG,MAAM,2BAAoBD,aAApB,kCAAZ;AAEA,MAAME,MAAM,GAAGP,EAAE,CAACQ,YAAH,OAAf;AACAR,EAAAA,EAAE,CAACS,YAAH,CAAgBF,MAAhB,EAAwBD,MAAxB;AACAN,EAAAA,EAAE,CAACU,aAAH,CAAiBH,MAAjB;AACA,MAAMI,UAAU,GAAGX,EAAE,CAACY,kBAAH,CAAsBL,MAAtB,QAAnB;AACAP,EAAAA,EAAE,CAACa,YAAH,CAAgBN,MAAhB;AACAT,EAAAA,sBAAsB,CAACG,GAAD,CAAtB,GAA8BU,UAA9B;AACA,SAAOA,UAAP;AACD","sourcesContent":["import isOldIE from './check-old-ie';\nimport WEBGL_FEATURES from './webgl-features-table';\nimport {assert} from '../utils';\n\n// Enables feature detection in IE11 due to a bug where gl.getExtension may return true\n// but fail to compile when the extension is enabled in the shader. Specifically,\n// the OES_standard_derivatives extension fails to compile in IE11 even though its included\n// in the list of supported extensions.\nconst compiledGlslExtensions = {};\n\n// options allows user agent to be overridden for testing\nexport default function canCompileGLGSExtension(gl, cap, options = {}) {\n  const feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n\n  if (!isOldIE(options)) {\n    return true;\n  }\n\n  if (cap in compiledGlslExtensions) {\n    return compiledGlslExtensions[cap];\n  }\n\n  const extensionName = feature[0];\n  const source = `#extension GL_${extensionName} : enable\\nvoid main(void) {}`;\n\n  const shader = gl.createShader(gl.VERTEX_SHADER);\n  gl.shaderSource(shader, source);\n  gl.compileShader(shader);\n  const canCompile = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n  gl.deleteShader(shader);\n  compiledGlslExtensions[cap] = canCompile;\n  return canCompile;\n}\n"],"file":"check-glsl-extension.js"}