{"version":3,"sources":["../../../src/animation/key-frames.js"],"names":["KeyFrames","keyFrames","_lastTime","startIndex","endIndex","factor","times","values","setKeyFrames","setTime","numKeys","length","i","_calculateKeys","time","Math","max","index","startTime","endTime","min"],"mappings":";;;;;;;;;;;;;IAAaA,S;AACX,qBAAYC,SAAZ,EAAuB;AAAA;AACrB,SAAKC,SAAL,GAAiB,CAAC,CAAlB;AACA,SAAKC,UAAL,GAAkB,CAAC,CAAnB;AACA,SAAKC,QAAL,GAAgB,CAAC,CAAjB;AACA,SAAKC,MAAL,GAAc,CAAd;AACA,SAAKC,KAAL,GAAa,EAAb;AACA,SAAKC,MAAL,GAAc,EAAd;AACA,SAAKC,YAAL,CAAkBP,SAAlB;AACA,SAAKQ,OAAL,CAAa,CAAb;AACD;;;;iCAEYR,S,EAAW;AACtB,UAAMS,OAAO,GAAGT,SAAS,CAACU,MAA1B;AACA,WAAKL,KAAL,CAAWK,MAAX,GAAoBD,OAApB;AACA,WAAKH,MAAL,CAAYI,MAAZ,GAAqBD,OAArB;;AAEA,WAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,OAApB,EAA6B,EAAEE,CAA/B,EAAkC;AAChC,aAAKN,KAAL,CAAWM,CAAX,IAAgBX,SAAS,CAACW,CAAD,CAAT,CAAa,CAAb,CAAhB;AACA,aAAKL,MAAL,CAAYK,CAAZ,IAAiBX,SAAS,CAACW,CAAD,CAAT,CAAa,CAAb,CAAjB;AACD;;AAED,WAAKC,cAAL,CAAoB,KAAKX,SAAzB;AACD;;;4BAEOY,I,EAAM;AACZA,MAAAA,IAAI,GAAGC,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYF,IAAZ,CAAP;;AAEA,UAAIA,IAAI,KAAK,KAAKZ,SAAlB,EAA6B;AAC3B,aAAKW,cAAL,CAAoBC,IAApB;;AACA,aAAKZ,SAAL,GAAiBY,IAAjB;AACD;AACF;;;mCAEc;AACb,aAAO,KAAKR,KAAL,CAAW,KAAKH,UAAhB,CAAP;AACD;;;iCAEY;AACX,aAAO,KAAKG,KAAL,CAAW,KAAKF,QAAhB,CAAP;AACD;;;mCAEc;AACb,aAAO,KAAKG,MAAL,CAAY,KAAKJ,UAAjB,CAAP;AACD;;;iCAEY;AACX,aAAO,KAAKI,MAAL,CAAY,KAAKH,QAAjB,CAAP;AACD;;;mCAEcU,I,EAAM;AACnB,UAAIG,KAAK,GAAG,CAAZ;AACA,UAAMP,OAAO,GAAG,KAAKJ,KAAL,CAAWK,MAA3B;;AAEA,WAAKM,KAAK,GAAG,CAAb,EAAgBA,KAAK,GAAGP,OAAO,GAAG,CAAlC,EAAqC,EAAEO,KAAvC,EAA8C;AAC5C,YAAI,KAAKX,KAAL,CAAWW,KAAK,GAAG,CAAnB,IAAwBH,IAA5B,EAAkC;AAChC;AACD;AACF;;AAED,WAAKX,UAAL,GAAkBc,KAAlB;AACA,WAAKb,QAAL,GAAgBa,KAAK,GAAG,CAAxB;AAEA,UAAMC,SAAS,GAAG,KAAKZ,KAAL,CAAW,KAAKH,UAAhB,CAAlB;AACA,UAAMgB,OAAO,GAAG,KAAKb,KAAL,CAAW,KAAKF,QAAhB,CAAhB;AACA,WAAKC,MAAL,GAAcU,IAAI,CAACK,GAAL,CAASL,IAAI,CAACC,GAAL,CAAS,CAAT,EAAY,CAACF,IAAI,GAAGI,SAAR,KAAsBC,OAAO,GAAGD,SAAhC,CAAZ,CAAT,EAAkE,CAAlE,CAAd;AACD","sourcesContent":["export class KeyFrames {\n  constructor(keyFrames) {\n    this._lastTime = -1;\n    this.startIndex = -1;\n    this.endIndex = -1;\n    this.factor = 0;\n    this.times = [];\n    this.values = [];\n    this.setKeyFrames(keyFrames);\n    this.setTime(0);\n  }\n\n  setKeyFrames(keyFrames) {\n    const numKeys = keyFrames.length;\n    this.times.length = numKeys;\n    this.values.length = numKeys;\n\n    for (let i = 0; i < numKeys; ++i) {\n      this.times[i] = keyFrames[i][0];\n      this.values[i] = keyFrames[i][1];\n    }\n\n    this._calculateKeys(this._lastTime);\n  }\n\n  setTime(time) {\n    time = Math.max(0, time);\n\n    if (time !== this._lastTime) {\n      this._calculateKeys(time);\n      this._lastTime = time;\n    }\n  }\n\n  getStartTime() {\n    return this.times[this.startIndex];\n  }\n\n  getEndTime() {\n    return this.times[this.endIndex];\n  }\n\n  getStartData() {\n    return this.values[this.startIndex];\n  }\n\n  getEndData() {\n    return this.values[this.endIndex];\n  }\n\n  _calculateKeys(time) {\n    let index = 0;\n    const numKeys = this.times.length;\n\n    for (index = 0; index < numKeys - 2; ++index) {\n      if (this.times[index + 1] > time) {\n        break;\n      }\n    }\n\n    this.startIndex = index;\n    this.endIndex = index + 1;\n\n    const startTime = this.times[this.startIndex];\n    const endTime = this.times[this.endIndex];\n    this.factor = Math.min(Math.max(0, (time - startTime) / (endTime - startTime)), 1);\n  }\n}\n"],"file":"key-frames.js"}