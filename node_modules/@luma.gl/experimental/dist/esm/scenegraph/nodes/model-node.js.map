{"version":3,"sources":["../../../../src/scenegraph/nodes/model-node.js"],"names":["Model","ScenegraphNode","ModelNode","gl","props","onBeforeRender","AfterRender","model","_setModelNodeProps","managedResources","forEach","resource","draw","setUniforms","setAttributes","updateModuleSettings","setProps"],"mappings":";;;;;;AAAA,SAAQA,KAAR,QAAoB,iBAApB;AACA,OAAOC,cAAP,MAA2B,mBAA3B;;IAEqBC,S;;;AACnB,qBAAYC,EAAZ,EAA4B;AAAA;;AAAA,QAAZC,KAAY,uEAAJ,EAAI;;AAAA;;AAC1B,mFAAMA,KAAN;AAGA,UAAKC,cAAL,GAAsB,IAAtB;AACA,UAAKC,WAAL,GAAmB,IAAnB;;AAGA,QAAIH,EAAE,YAAYH,KAAlB,EAAyB;AACvB,YAAKO,KAAL,GAAaJ,EAAb;;AACA,YAAKK,kBAAL,CAAwBJ,KAAxB;AACD,KAHD,MAGO;AACL,YAAKG,KAAL,GAAa,IAAIP,KAAJ,CAAUG,EAAV,EAAcC,KAAd,CAAb;AACD;;AAED,UAAKK,gBAAL,GAAwBL,KAAK,CAACK,gBAAN,IAA0B,EAAlD;AAf0B;AAgB3B;;;;6BAEQL,K,EAAO;AACd,8EAAeA,KAAf;;AACA,WAAKI,kBAAL,CAAwBJ,KAAxB;;AACA,aAAO,IAAP;AACD;;;8BAEQ;AACP,UAAI,KAAKG,KAAT,EAAgB;AACd,aAAKA,KAAL;AACA,aAAKA,KAAL,GAAa,IAAb;AACD;;AAED,WAAKE,gBAAL,CAAsBC,OAAtB,CAA8B,UAAAC,QAAQ;AAAA,eAAIA,QAAQ,UAAR,EAAJ;AAAA,OAAtC;AACA,WAAKF,gBAAL,GAAwB,EAAxB;AACD;;;2BAGa;AAAA;;AAEZ,aAAO,oBAAKF,KAAL,EAAWK,IAAX,8BAAP;AACD;;;kCAEoB;AAAA;;AACnB,2BAAKL,KAAL,EAAWM,WAAX;;AACA,aAAO,IAAP;AACD;;;oCAEsB;AAAA;;AACrB,2BAAKN,KAAL,EAAWO,aAAX;;AACA,aAAO,IAAP;AACD;;;2CAE6B;AAAA;;AAC5B,2BAAKP,KAAL,EAAWQ,oBAAX;;AACA,aAAO,IAAP;AACD;;;uCAIkBX,K,EAAO;AACxB,WAAKG,KAAL,CAAWS,QAAX,CAAoBZ,KAApB;AACD;;;;EA5DoCH,c;;SAAlBC,S","sourcesContent":["import {Model} from '@luma.gl/engine';\nimport ScenegraphNode from './scenegraph-node';\n\nexport default class ModelNode extends ScenegraphNode {\n  constructor(gl, props = {}) {\n    super(props);\n\n    // pverride callbacks to make sure we call them with this\n    this.onBeforeRender = null;\n    this.AfterRender = null;\n\n    // Create new Model or used supplied Model\n    if (gl instanceof Model) {\n      this.model = gl;\n      this._setModelNodeProps(props);\n    } else {\n      this.model = new Model(gl, props);\n    }\n\n    this.managedResources = props.managedResources || [];\n  }\n\n  setProps(props) {\n    super.setProps(props);\n    this._setModelNodeProps(props);\n    return this;\n  }\n\n  delete() {\n    if (this.model) {\n      this.model.delete();\n      this.model = null;\n    }\n\n    this.managedResources.forEach(resource => resource.delete());\n    this.managedResources = [];\n  }\n\n  // Forward node methods\n  draw(...args) {\n    // Return value indicates if something was actually drawn\n    return this.model.draw(...args);\n  }\n\n  setUniforms(...args) {\n    this.model.setUniforms(...args);\n    return this;\n  }\n\n  setAttributes(...args) {\n    this.model.setAttributes(...args);\n    return this;\n  }\n\n  updateModuleSettings(...args) {\n    this.model.updateModuleSettings(...args);\n    return this;\n  }\n\n  // PRIVATE\n\n  _setModelNodeProps(props) {\n    this.model.setProps(props);\n  }\n}\n"],"file":"model-node.js"}