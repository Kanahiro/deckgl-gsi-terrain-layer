{"version":3,"sources":["../../../../src/modules/phong-lighting/phong-lighting.js"],"names":["gouraudLighting","name","dependencies","lights","vs","lightingShader","defines","LIGHTING_VERTEX","getUniforms","phongLighting","fs","LIGHTING_FRAGMENT","INITIAL_MODULE_OPTIONS","getMaterialUniforms","material","ambient","diffuse","shininess","specularColor","lighting_uAmbient","lighting_uDiffuse","lighting_uShininess","lighting_uSpecularColor","map","x","opts","lighting_uEnabled"],"mappings":";;;;;;;;;AAAA;;AACA;;AAEA,IAAMA,eAAe,GAAG;AACtBC,EAAAA,IAAI,EAAE,kBADgB;AAEtBC,EAAAA,YAAY,EAAE,CAACC,kBAAD,CAFQ;AAGtBC,EAAAA,EAAE,EAAEC,yBAHkB;AAItBC,EAAAA,OAAO,EAAE;AACPC,IAAAA,eAAe,EAAE;AADV,GAJa;AAOtBC,EAAAA,WAAW,EAAXA;AAPsB,CAAxB;;AAUA,IAAMC,aAAa,GAAG;AACpBR,EAAAA,IAAI,EAAE,gBADc;AAEpBC,EAAAA,YAAY,EAAE,CAACC,kBAAD,CAFM;AAGpBO,EAAAA,EAAE,EAAEL,yBAHgB;AAIpBC,EAAAA,OAAO,EAAE;AACPK,IAAAA,iBAAiB,EAAE;AADZ,GAJW;AAOpBH,EAAAA,WAAW,EAAXA;AAPoB,CAAtB;;AAUA,IAAMI,sBAAsB,GAAG,EAA/B;;AAEA,SAASC,mBAAT,CAA6BC,QAA7B,EAAuC;AAAA,0BACiDA,QADjD,CAC9BC,OAD8B;AAAA,MAC9BA,OAD8B,kCACpB,IADoB;AAAA,0BACiDD,QADjD,CACdE,OADc;AAAA,MACdA,OADc,kCACJ,GADI;AAAA,4BACiDF,QADjD,CACCG,SADD;AAAA,MACCA,SADD,oCACa,EADb;AAAA,8BACiDH,QADjD,CACiBI,aADjB;AAAA,MACiBA,aADjB,sCACiC,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,CADjC;AAGrC,SAAO;AACLC,IAAAA,iBAAiB,EAAEJ,OADd;AAELK,IAAAA,iBAAiB,EAAEJ,OAFd;AAGLK,IAAAA,mBAAmB,EAAEJ,SAHhB;AAILK,IAAAA,uBAAuB,EAAEJ,aAAa,CAACK,GAAd,CAAkB,UAAAC,CAAC;AAAA,aAAIA,CAAC,GAAG,GAAR;AAAA,KAAnB;AAJpB,GAAP;AAMD;;AAED,SAAShB,WAAT,GAAoD;AAAA,MAA/BiB,IAA+B,uEAAxBb,sBAAwB;;AAClD,MAAI,EAAE,cAAca,IAAhB,CAAJ,EAA2B;AACzB,WAAO,EAAP;AACD;;AAHiD,MAK3CX,QAL2C,GAK/BW,IAL+B,CAK3CX,QAL2C;;AAOlD,MAAI,CAACA,QAAL,EAAe;AACb,WAAO;AAACY,MAAAA,iBAAiB,EAAE;AAApB,KAAP;AACD;;AAED,SAAOb,mBAAmB,CAACC,QAAD,CAA1B;AACD","sourcesContent":["import lights from '../lights/lights';\nimport lightingShader from './phong-lighting.glsl';\n\nconst gouraudLighting = {\n  name: 'gouraud-lighting',\n  dependencies: [lights],\n  vs: lightingShader,\n  defines: {\n    LIGHTING_VERTEX: 1\n  },\n  getUniforms\n};\n\nconst phongLighting = {\n  name: 'phong-lighting',\n  dependencies: [lights],\n  fs: lightingShader,\n  defines: {\n    LIGHTING_FRAGMENT: 1\n  },\n  getUniforms\n};\n\nconst INITIAL_MODULE_OPTIONS = {};\n\nfunction getMaterialUniforms(material) {\n  const {ambient = 0.35, diffuse = 0.6, shininess = 32, specularColor = [30, 30, 30]} = material;\n\n  return {\n    lighting_uAmbient: ambient,\n    lighting_uDiffuse: diffuse,\n    lighting_uShininess: shininess,\n    lighting_uSpecularColor: specularColor.map(x => x / 255)\n  };\n}\n\nfunction getUniforms(opts = INITIAL_MODULE_OPTIONS) {\n  if (!('material' in opts)) {\n    return {};\n  }\n\n  const {material} = opts;\n\n  if (!material) {\n    return {lighting_uEnabled: false};\n  }\n\n  return getMaterialUniforms(material);\n}\n\nexport {gouraudLighting, phongLighting};\n"],"file":"phong-lighting.js"}