{"version":3,"sources":["../../../src/classes/matrix3.js"],"names":["Matrix","checkVector","deprecated","vec4_transformMat3","mat3","vec2","vec3","IDENTITY","Object","freeze","ZERO","INDICES","COL0ROW0","COL0ROW1","COL0ROW2","COL1ROW0","COL1ROW1","COL1ROW2","COL2ROW0","COL2ROW1","COL2ROW2","constants","Matrix3","ELEMENTS","RANK","constructor","array","arguments","length","Array","isArray","copy","identity","check","set","m00","m10","m20","m01","m11","m21","m02","m12","m22","setRowMajor","determinant","fromQuaternion","q","fromQuat","transpose","invert","multiplyLeft","a","multiply","multiplyRight","rotate","radians","scale","factor","translate","vec","transform","vector","result","transformMat3","Error","transformVector","transformVector2","transformVector3"],"mappings":"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","sourcesContent":["// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport Matrix from './base/matrix';\nimport {checkVector, deprecated} from '../lib/validators';\nimport {vec4_transformMat3} from '../lib/gl-matrix-extras';\n\n// @ts-ignore: error TS2307: Cannot find module 'gl-matrix/...'.\nimport * as mat3 from 'gl-matrix/mat3';\n// @ts-ignore: error TS2307: Cannot find module 'gl-matrix/...'.\nimport * as vec2 from 'gl-matrix/vec2';\n// @ts-ignore: error TS2307: Cannot find module 'gl-matrix/...'.\nimport * as vec3 from 'gl-matrix/vec3';\n\nconst IDENTITY = Object.freeze([1, 0, 0, 0, 1, 0, 0, 0, 1]);\nconst ZERO = Object.freeze([0, 0, 0, 0, 0, 0, 0, 0, 0]);\n\nconst INDICES = Object.freeze({\n  COL0ROW0: 0,\n  COL0ROW1: 1,\n  COL0ROW2: 2,\n  COL1ROW0: 3,\n  COL1ROW1: 4,\n  COL1ROW2: 5,\n  COL2ROW0: 6,\n  COL2ROW1: 7,\n  COL2ROW2: 8\n});\n\nconst constants = {};\n\nexport default class Matrix3 extends Matrix {\n  static get IDENTITY() {\n    constants.IDENTITY = constants.IDENTITY || Object.freeze(new Matrix3(IDENTITY));\n    return constants.IDENTITY;\n  }\n\n  static get ZERO() {\n    constants.ZERO = constants.ZERO || Object.freeze(new Matrix3(ZERO));\n    return constants.ZERO;\n  }\n\n  get ELEMENTS() {\n    return 9;\n  }\n\n  get RANK() {\n    return 3;\n  }\n\n  get INDICES() {\n    return INDICES;\n  }\n\n  constructor(array) {\n    // PERF NOTE: initialize elements as double precision numbers\n    super(-0, -0, -0, -0, -0, -0, -0, -0, -0);\n    if (arguments.length === 1 && Array.isArray(array)) {\n      this.copy(array);\n    } else {\n      this.identity();\n    }\n  }\n\n  copy(array) {\n    this[0] = array[0];\n    this[1] = array[1];\n    this[2] = array[2];\n    this[3] = array[3];\n    this[4] = array[4];\n    this[5] = array[5];\n    this[6] = array[6];\n    this[7] = array[7];\n    this[8] = array[8];\n    return this.check();\n  }\n\n  // accepts column major order, stores in column major order\n  // eslint-disable-next-line max-params\n  set(m00, m10, m20, m01, m11, m21, m02, m12, m22) {\n    this[0] = m00;\n    this[1] = m10;\n    this[2] = m20;\n    this[3] = m01;\n    this[4] = m11;\n    this[5] = m21;\n    this[6] = m02;\n    this[7] = m12;\n    this[8] = m22;\n    return this.check();\n  }\n\n  // accepts row major order, stores as column major\n  // eslint-disable-next-line max-params\n  setRowMajor(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n    this[0] = m00;\n    this[1] = m10;\n    this[2] = m20;\n    this[3] = m01;\n    this[4] = m11;\n    this[5] = m21;\n    this[6] = m02;\n    this[7] = m12;\n    this[8] = m22;\n    return this.check();\n  }\n\n  // Accessors\n\n  determinant() {\n    return mat3.determinant(this);\n  }\n\n  // Constructors\n\n  identity() {\n    return this.copy(IDENTITY);\n  }\n\n  // Calculates a 3x3 matrix from the given quaternion\n  // q quat  Quaternion to create matrix from\n  fromQuaternion(q) {\n    mat3.fromQuat(this, q);\n    return this.check();\n  }\n\n  // Modifiers\n\n  transpose() {\n    mat3.transpose(this, this);\n    return this.check();\n  }\n\n  invert() {\n    mat3.invert(this, this);\n    return this.check();\n  }\n\n  // Operations\n\n  multiplyLeft(a) {\n    mat3.multiply(this, a, this);\n    return this.check();\n  }\n\n  multiplyRight(a) {\n    mat3.multiply(this, this, a);\n    return this.check();\n  }\n\n  rotate(radians) {\n    mat3.rotate(this, this, radians);\n    return this.check();\n  }\n\n  scale(factor) {\n    if (Array.isArray(factor)) {\n      mat3.scale(this, this, factor);\n    } else {\n      mat3.scale(this, this, [factor, factor, factor]);\n    }\n\n    return this.check();\n  }\n\n  translate(vec) {\n    mat3.translate(this, this, vec);\n    return this.check();\n  }\n\n  // Transforms\n\n  transform(vector, result) {\n    switch (vector.length) {\n      case 2:\n        result = vec2.transformMat3(result || [-0, -0], vector, this);\n        break;\n      case 3:\n        result = vec3.transformMat3(result || [-0, -0, -0], vector, this);\n        break;\n      case 4:\n        result = vec4_transformMat3(result || [-0, -0, -0, -0], vector, this);\n        break;\n      default:\n        throw new Error('Illegal vector');\n    }\n    checkVector(result, vector.length);\n    return result;\n  }\n\n  // DEPRECATED IN 3.0\n\n  transformVector(vector, result) {\n    deprecated('Matrix3.transformVector');\n    return this.transform(vector, result);\n  }\n\n  transformVector2(vector, result) {\n    deprecated('Matrix3.transformVector');\n    return this.transform(vector, result);\n  }\n\n  transformVector3(vector, result) {\n    deprecated('Matrix3.transformVector');\n    return this.transform(vector, result);\n  }\n}\n"],"file":"matrix3.js"}