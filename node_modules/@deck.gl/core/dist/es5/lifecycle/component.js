"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _constants = require("../lifecycle/constants");

var _createProps = require("./create-props");

var _constants2 = require("./constants");

var _componentState = _interopRequireDefault(require("./component-state"));

var ASYNC_ORIGINAL = _constants2.PROP_SYMBOLS.ASYNC_ORIGINAL,
    ASYNC_RESOLVED = _constants2.PROP_SYMBOLS.ASYNC_RESOLVED,
    ASYNC_DEFAULTS = _constants2.PROP_SYMBOLS.ASYNC_DEFAULTS;
var defaultProps = {};
var counter = 0;

var Component = function () {
  function Component() {
    (0, _classCallCheck2["default"])(this, Component);
    this.props = _createProps.createProps.apply(this, arguments);
    this.id = this.props.id;
    this.count = counter++;
    this.lifecycle = _constants.LIFECYCLE.NO_STATE;
    this.parent = null;
    this.context = null;
    this.state = null;
    this.internalState = null;
    Object.seal(this);
  }

  (0, _createClass2["default"])(Component, [{
    key: "clone",
    value: function clone(newProps) {
      var props = this.props;
      var asyncProps = {};

      for (var key in props[ASYNC_DEFAULTS]) {
        if (key in props[ASYNC_RESOLVED]) {
          asyncProps[key] = props[ASYNC_RESOLVED][key];
        } else if (key in props[ASYNC_ORIGINAL]) {
          asyncProps[key] = props[ASYNC_ORIGINAL][key];
        }
      }

      return new this.constructor(Object.assign({}, props, asyncProps, newProps));
    }
  }, {
    key: "_initState",
    value: function _initState() {
      this.internalState = new _componentState["default"]({});
    }
  }, {
    key: "stats",
    get: function get() {
      return this.internalState.stats;
    }
  }]);
  return Component;
}();

exports["default"] = Component;
Component.componentName = 'Component';
Component.defaultProps = defaultProps;
//# sourceMappingURL=component.js.map