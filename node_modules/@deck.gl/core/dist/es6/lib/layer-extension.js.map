{"version":3,"sources":["../../../src/lib/layer-extension.js"],"names":["deepEqual","LayerExtension","constructor","opts","equals","extension","getShaders","getSubLayerProps","defaultProps","newProps","updateTriggers","key","props","propDef","propValue","type","getSubLayerAccessor","initializeState","context","updateState","params","draw","finalizeState"],"mappings":"AAmBA,SAAQA,SAAR,QAAwB,qBAAxB;AAEA,eAAe,MAAMC,cAAN,CAAqB;AAClCC,EAAAA,WAAW,CAACC,IAAI,GAAG,EAAR,EAAY;AACrB,SAAKA,IAAL,GAAYA,IAAZ;AACD;;AAEDC,EAAAA,MAAM,CAACC,SAAD,EAAY;AAChB,QAAI,SAASA,SAAb,EAAwB;AACtB,aAAO,IAAP;AACD;;AAED,WAAO,KAAKH,WAAL,KAAqBG,SAAS,CAACH,WAA/B,IAA8CF,SAAS,CAAC,KAAKG,IAAN,EAAYE,SAAS,CAACF,IAAtB,CAA9D;AACD;;AAEDG,EAAAA,UAAU,CAACD,SAAD,EAAY;AACpB,WAAO,IAAP;AACD;;AAEDE,EAAAA,gBAAgB,CAACF,SAAD,EAAY;AAC1B,UAAM;AAACG,MAAAA,YAAY,GAAG;AAAhB,QAAsBH,SAAS,CAACH,WAAtC;AACA,UAAMO,QAAQ,GAAG;AACfC,MAAAA,cAAc,EAAE;AADD,KAAjB;;AAKA,SAAK,MAAMC,GAAX,IAAkBH,YAAlB,EAAgC;AAC9B,UAAIG,GAAG,IAAI,KAAKC,KAAhB,EAAuB;AACrB,cAAMC,OAAO,GAAGL,YAAY,CAACG,GAAD,CAA5B;AACA,cAAMG,SAAS,GAAG,KAAKF,KAAL,CAAWD,GAAX,CAAlB;AACAF,QAAAA,QAAQ,CAACE,GAAD,CAAR,GAAgBG,SAAhB;;AACA,YAAID,OAAO,IAAIA,OAAO,CAACE,IAAR,KAAiB,UAAhC,EAA4C;AAC1CN,UAAAA,QAAQ,CAACC,cAAT,CAAwBC,GAAxB,IAA+B,KAAKC,KAAL,CAAWF,cAAX,CAA0BC,GAA1B,CAA/B;;AACA,cAAI,OAAOG,SAAP,KAAqB,UAAzB,EAAqC;AACnCL,YAAAA,QAAQ,CAACE,GAAD,CAAR,GAAgB,KAAKK,mBAAL,CAAyBF,SAAzB,EAAoC,IAApC,CAAhB;AACD;AACF;AACF;AACF;;AAED,WAAOL,QAAP;AACD;;AAEDQ,EAAAA,eAAe,CAACC,OAAD,EAAUb,SAAV,EAAqB,CAAE;;AAEtCc,EAAAA,WAAW,CAACC,MAAD,EAASf,SAAT,EAAoB,CAAE;;AAEjCgB,EAAAA,IAAI,CAACD,MAAD,EAASf,SAAT,EAAoB,CAAE;;AAE1BiB,EAAAA,aAAa,CAACjB,SAAD,EAAY,CAAE;;AA/CO","sourcesContent":["// Copyright (c) 2015 - 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\nimport {deepEqual} from '../utils/deep-equal';\n\nexport default class LayerExtension {\n  constructor(opts = {}) {\n    this.opts = opts;\n  }\n\n  equals(extension) {\n    if (this === extension) {\n      return true;\n    }\n\n    return this.constructor === extension.constructor && deepEqual(this.opts, extension.opts);\n  }\n\n  getShaders(extension) {\n    return null;\n  }\n\n  getSubLayerProps(extension) {\n    const {defaultProps = {}} = extension.constructor;\n    const newProps = {\n      updateTriggers: {}\n    };\n\n    /* eslint-disable max-depth */\n    for (const key in defaultProps) {\n      if (key in this.props) {\n        const propDef = defaultProps[key];\n        const propValue = this.props[key];\n        newProps[key] = propValue;\n        if (propDef && propDef.type === 'accessor') {\n          newProps.updateTriggers[key] = this.props.updateTriggers[key];\n          if (typeof propValue === 'function') {\n            newProps[key] = this.getSubLayerAccessor(propValue, true);\n          }\n        }\n      }\n    }\n    /* eslint-enable max-depth */\n    return newProps;\n  }\n\n  initializeState(context, extension) {}\n\n  updateState(params, extension) {}\n\n  draw(params, extension) {}\n\n  finalizeState(extension) {}\n}\n"],"file":"layer-extension.js"}