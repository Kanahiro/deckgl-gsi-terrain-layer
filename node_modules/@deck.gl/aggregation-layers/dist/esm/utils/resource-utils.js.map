{"version":3,"sources":["../../../src/utils/resource-utils.js"],"names":["Framebuffer","Texture2D","isWebGL2","DEFAULT_PARAMETERS","getFloatTexture","gl","opts","width","height","data","unpackFlipY","parameters","texture","format","type","border","mipmaps","dataFormat","getFramebuffer","id","fb","attachments","getFloatArray","array","size","fillValue","length","Float32Array","fill"],"mappings":";;;;AACA,SAAQA,WAAR,EAAqBC,SAArB,EAAgCC,QAAhC,QAA+C,eAA/C;AAEA,IAAMC,kBAAkB,wJAAxB;AAKA,OAAO,SAASC,eAAT,CAAyBC,EAAzB,EAAwC;AAAA,MAAXC,IAAW,uEAAJ,EAAI;AAAA,oBAOzCA,IAPyC,CAE3CC,KAF2C;AAAA,MAE3CA,KAF2C,4BAEnC,CAFmC;AAAA,qBAOzCD,IAPyC,CAG3CE,MAH2C;AAAA,MAG3CA,MAH2C,6BAGlC,CAHkC;AAAA,mBAOzCF,IAPyC,CAI3CG,IAJ2C;AAAA,MAI3CA,IAJ2C,2BAIpC,IAJoC;AAAA,0BAOzCH,IAPyC,CAK3CI,WAL2C;AAAA,MAK3CA,WAL2C,kCAK7B,IAL6B;AAAA,yBAOzCJ,IAPyC,CAM3CK,UAN2C;AAAA,MAM3CA,UAN2C,iCAM9BR,kBAN8B;AAQ7C,MAAMS,OAAO,GAAG,IAAIX,SAAJ,CAAcI,EAAd,EAAkB;AAChCI,IAAAA,IAAI,EAAJA,IADgC;AAEhCI,IAAAA,MAAM,EAAEX,QAAQ,CAACG,EAAD,CAAR,eAFwB;AAGhCS,IAAAA,IAAI,MAH4B;AAIhCC,IAAAA,MAAM,EAAE,CAJwB;AAKhCC,IAAAA,OAAO,EAAE,KALuB;AAMhCL,IAAAA,UAAU,EAAVA,UANgC;AAOhCM,IAAAA,UAAU,MAPsB;AAQhCV,IAAAA,KAAK,EAALA,KARgC;AAShCC,IAAAA,MAAM,EAANA,MATgC;AAUhCE,IAAAA,WAAW,EAAXA;AAVgC,GAAlB,CAAhB;AAYA,SAAOE,OAAP;AACD;AAED,OAAO,SAASM,cAAT,CAAwBb,EAAxB,EAA4BC,IAA5B,EAAkC;AAAA,MAChCa,EADgC,GACMb,IADN,CAChCa,EADgC;AAAA,qBACMb,IADN,CAC5BC,KAD4B;AAAA,MAC5BA,KAD4B,6BACpB,CADoB;AAAA,sBACMD,IADN,CACjBE,MADiB;AAAA,MACjBA,MADiB,8BACR,CADQ;AAAA,MACLI,OADK,GACMN,IADN,CACLM,OADK;AAEvC,MAAMQ,EAAE,GAAG,IAAIpB,WAAJ,CAAgBK,EAAhB,EAAoB;AAC7Bc,IAAAA,EAAE,EAAFA,EAD6B;AAE7BZ,IAAAA,KAAK,EAALA,KAF6B;AAG7BC,IAAAA,MAAM,EAANA,MAH6B;AAI7Ba,IAAAA,WAAW,6BACeT,OADf;AAJkB,GAApB,CAAX;AASA,SAAOQ,EAAP;AACD;AAED,OAAO,SAASE,aAAT,CAAuBC,KAAvB,EAA8BC,IAA9B,EAAmD;AAAA,MAAfC,SAAe,uEAAH,CAAG;;AACxD,MAAI,CAACF,KAAD,IAAUA,KAAK,CAACG,MAAN,GAAeF,IAA7B,EAAmC;AACjC,WAAO,IAAIG,YAAJ,CAAiBH,IAAjB,EAAuBI,IAAvB,CAA4BH,SAA5B,CAAP;AACD;;AACD,SAAOF,KAAP;AACD","sourcesContent":["import GL from '@luma.gl/constants';\nimport {Framebuffer, Texture2D, isWebGL2} from '@luma.gl/core';\n\nconst DEFAULT_PARAMETERS = {\n  [GL.TEXTURE_MAG_FILTER]: GL.NEAREST,\n  [GL.TEXTURE_MIN_FILTER]: GL.NEAREST\n};\n\nexport function getFloatTexture(gl, opts = {}) {\n  const {\n    width = 1,\n    height = 1,\n    data = null,\n    unpackFlipY = true,\n    parameters = DEFAULT_PARAMETERS\n  } = opts;\n  const texture = new Texture2D(gl, {\n    data,\n    format: isWebGL2(gl) ? GL.RGBA32F : GL.RGBA,\n    type: GL.FLOAT,\n    border: 0,\n    mipmaps: false,\n    parameters,\n    dataFormat: GL.RGBA,\n    width,\n    height,\n    unpackFlipY\n  });\n  return texture;\n}\n\nexport function getFramebuffer(gl, opts) {\n  const {id, width = 1, height = 1, texture} = opts;\n  const fb = new Framebuffer(gl, {\n    id,\n    width,\n    height,\n    attachments: {\n      [GL.COLOR_ATTACHMENT0]: texture\n    }\n  });\n\n  return fb;\n}\n\nexport function getFloatArray(array, size, fillValue = 0) {\n  if (!array || array.length < size) {\n    return new Float32Array(size).fill(fillValue);\n  }\n  return array;\n}\n"],"file":"resource-utils.js"}