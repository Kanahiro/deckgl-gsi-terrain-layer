{"version":3,"sources":["../../../src/hexagon-layer/hexagon-layer.js"],"names":["log","ColumnLayer","defaultColorRange","pointToHexbin","CPUAggregator","AggregationLayer","nop","defaultProps","colorDomain","colorRange","getColorValue","type","value","getColorWeight","x","colorAggregation","lowerPercentile","min","max","upperPercentile","colorScaleType","onSetColorDomain","elevationDomain","elevationRange","getElevationValue","getElevationWeight","elevationAggregation","elevationLowerPercentile","elevationUpperPercentile","elevationScale","elevationScaleType","onSetElevationDomain","radius","coverage","extruded","hexagonAggregator","getPosition","position","material","_filterData","optional","HexagonLayer","shouldUpdateState","changeFlags","somethingChanged","initializeState","cpuAggregator","getAggregator","props","getCellSize","state","aggregatorState","hexagonVertices","attributeManager","getAttributeManager","add","positions","size","accessor","updateState","opts","oldVertices","propsOrDataChanged","setState","viewport","context","attributes","getAttributes","layerData","vertices","convertLatLngToMeterOffset","updateRadiusAngle","unitsPerMeter","getDistanceScales","radiusCommon","angle","Array","isArray","length","vertex0","vertex3","centroid","centroidFlat","projectFlat","metersPerUnit","map","vt","vtFlat","error","getPickingInfo","info","_onGetSublayerColor","cell","getAccessor","_onGetSublayerElevation","_getSublayerUpdateTriggers","getUpdateTriggers","renderLayers","transitions","SubLayerClass","getSubLayerClass","updateTriggers","geometry","diskResolution","getFillColor","bind","getElevation","getSubLayerProps","id","data","layerName"],"mappings":"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","sourcesContent":["// Copyright (c) 2015 - 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport {log} from '@deck.gl/core';\nimport {ColumnLayer} from '@deck.gl/layers';\n\nimport {defaultColorRange} from '../utils/color-utils';\n\nimport {pointToHexbin} from './hexagon-aggregator';\nimport CPUAggregator from '../utils/cpu-aggregator';\nimport AggregationLayer from '../aggregation-layer';\n\nfunction nop() {}\n\nconst defaultProps = {\n  // color\n  colorDomain: null,\n  colorRange: defaultColorRange,\n  getColorValue: {type: 'accessor', value: null}, // default value is calcuated from `getColorWeight` and `colorAggregation`\n  getColorWeight: {type: 'accessor', value: x => 1},\n  colorAggregation: 'SUM',\n  lowerPercentile: {type: 'number', value: 0, min: 0, max: 100},\n  upperPercentile: {type: 'number', value: 100, min: 0, max: 100},\n  colorScaleType: 'quantize',\n  onSetColorDomain: nop,\n\n  // elevation\n  elevationDomain: null,\n  elevationRange: [0, 1000],\n  getElevationValue: {type: 'accessor', value: null}, // default value is calcuated from `getElevationWeight` and `elevationAggregation`\n  getElevationWeight: {type: 'accessor', value: x => 1},\n  elevationAggregation: 'SUM',\n  elevationLowerPercentile: {type: 'number', value: 0, min: 0, max: 100},\n  elevationUpperPercentile: {type: 'number', value: 100, min: 0, max: 100},\n  elevationScale: {type: 'number', min: 0, value: 1},\n  elevationScaleType: 'linear',\n  onSetElevationDomain: nop,\n\n  radius: {type: 'number', value: 1000, min: 1},\n  coverage: {type: 'number', min: 0, max: 1, value: 1},\n  extruded: false,\n  hexagonAggregator: pointToHexbin,\n  getPosition: {type: 'accessor', value: x => x.position},\n  // Optional material for 'lighting' shader module\n  material: true,\n\n  // data filter\n  _filterData: {type: 'function', value: null, optional: true}\n};\n\nexport default class HexagonLayer extends AggregationLayer {\n  shouldUpdateState({changeFlags}) {\n    return changeFlags.somethingChanged;\n  }\n  initializeState() {\n    const cpuAggregator = new CPUAggregator({\n      getAggregator: props => props.hexagonAggregator,\n      getCellSize: props => props.radius\n    });\n\n    this.state = {\n      cpuAggregator,\n      aggregatorState: cpuAggregator.state,\n      hexagonVertices: null\n    };\n    const attributeManager = this.getAttributeManager();\n    attributeManager.add({\n      positions: {size: 3, accessor: 'getPosition'}\n    });\n    // color and elevation attributes can't be added as attributes\n    // they are calculated using 'getValue' accessor that takes an array of pints.\n  }\n\n  updateState(opts) {\n    super.updateState(opts);\n    const {cpuAggregator, hexagonVertices: oldVertices} = this.state;\n\n    if (opts.changeFlags.propsOrDataChanged) {\n      this.setState({\n        // make a copy of the internal state of cpuAggregator for testing\n        aggregatorState: cpuAggregator.updateState(opts, {\n          viewport: this.context.viewport,\n          attributes: this.getAttributes()\n        })\n      });\n    }\n\n    // if user provided custom aggregator and returns hexagonVertices,\n    // Need to recalculate radius and angle based on vertices\n    const {hexagonVertices} = cpuAggregator.state.layerData || {};\n\n    if (hexagonVertices && oldVertices !== hexagonVertices) {\n      const vertices = this.convertLatLngToMeterOffset(hexagonVertices);\n      if (vertices) {\n        this.setState({\n          hexagonVertices,\n          vertices\n        });\n      }\n    } else {\n      // update radius angle by viewport\n      this.updateRadiusAngle();\n    }\n  }\n\n  updateRadiusAngle(vertices) {\n    const {viewport} = this.context;\n    const {unitsPerMeter} = viewport.getDistanceScales();\n    const {cpuAggregator} = this.state;\n\n    if (cpuAggregator.state.layerData && cpuAggregator.state.layerData.radiusCommon) {\n      const {radiusCommon} = cpuAggregator.state.layerData;\n      const radius = radiusCommon / unitsPerMeter[0];\n\n      // convert radius in common to meter\n      this.setState({angle: 90, radius});\n    }\n  }\n\n  convertLatLngToMeterOffset(hexagonVertices) {\n    const {viewport} = this.context;\n    if (Array.isArray(hexagonVertices) && hexagonVertices.length === 6) {\n      // get centroid of hexagons\n      const vertex0 = hexagonVertices[0];\n      const vertex3 = hexagonVertices[3];\n\n      const centroid = [(vertex0[0] + vertex3[0]) / 2, (vertex0[1] + vertex3[1]) / 2];\n      const centroidFlat = viewport.projectFlat(centroid);\n\n      const {metersPerUnit} = viewport.getDistanceScales(centroid);\n\n      // offset all points by centroid to meter offset\n      const vertices = hexagonVertices.map(vt => {\n        const vtFlat = viewport.projectFlat(vt);\n\n        return [\n          (vtFlat[0] - centroidFlat[0]) * metersPerUnit[0],\n          (vtFlat[1] - centroidFlat[1]) * metersPerUnit[1]\n        ];\n      });\n\n      return vertices;\n    }\n\n    log.error('HexagonLayer: hexagonVertices needs to be an array of 6 points')();\n    return null;\n  }\n\n  getPickingInfo({info}) {\n    return this.state.cpuAggregator.getPickingInfo({info});\n  }\n\n  // create a method for testing\n  _onGetSublayerColor(cell) {\n    return this.state.cpuAggregator.getAccessor('fillColor')(cell);\n  }\n\n  // create a method for testing\n  _onGetSublayerElevation(cell) {\n    return this.state.cpuAggregator.getAccessor('elevation')(cell);\n  }\n\n  _getSublayerUpdateTriggers() {\n    return this.state.cpuAggregator.getUpdateTriggers(this.props);\n  }\n\n  renderLayers() {\n    const {elevationScale, extruded, coverage, material, transitions} = this.props;\n    const {angle, radius, cpuAggregator, vertices} = this.state;\n\n    const SubLayerClass = this.getSubLayerClass('hexagon-cell', ColumnLayer);\n    const updateTriggers = this._getSublayerUpdateTriggers();\n\n    const geometry = vertices && vertices.length ? {vertices, radius: 1} : {radius, angle};\n    return new SubLayerClass(\n      {\n        ...geometry,\n        diskResolution: 6,\n        elevationScale,\n        extruded,\n        coverage,\n        material,\n\n        getFillColor: this._onGetSublayerColor.bind(this),\n        getElevation: this._onGetSublayerElevation.bind(this),\n        transitions: transitions && {\n          getFillColor: transitions.getColorValue || transitions.getColorWeight,\n          getElevation: transitions.getElevationValue || transitions.getElevationWeight\n        }\n      },\n      this.getSubLayerProps({\n        id: 'hexagon-cell',\n        updateTriggers\n      }),\n      {\n        data: cpuAggregator.state.layerData.data\n      }\n    );\n  }\n}\n\nHexagonLayer.layerName = 'HexagonLayer';\nHexagonLayer.defaultProps = defaultProps;\n"],"file":"hexagon-layer.js"}