{"version":3,"sources":["../../../../src/tileset/traversers/i3s-tile-manager.js"],"names":["STATUS","REQUESTED","COMPLETED","ERROR","I3STileManager","constructor","_statusMap","add","request","key","callback","frameState","status","then","data","catch","error","update","find"],"mappings":"AAAA,MAAMA,MAAM,GAAG;AACbC,EAAAA,SAAS,EAAE,WADE;AAEbC,EAAAA,SAAS,EAAE,WAFE;AAGbC,EAAAA,KAAK,EAAE;AAHM,CAAf;AAOA,eAAe,MAAMC,cAAN,CAAqB;AAClCC,EAAAA,WAAW,GAAG;AACZ,SAAKC,UAAL,GAAkB,EAAlB;AACD;;AAEDC,EAAAA,GAAG,CAACC,OAAD,EAAUC,GAAV,EAAeC,QAAf,EAAyBC,UAAzB,EAAqC;AACtC,QAAI,CAAC,KAAKL,UAAL,CAAgBG,GAAhB,CAAL,EAA2B;AACzB,WAAKH,UAAL,CAAgBG,GAAhB,IAAuB;AAACD,QAAAA,OAAD;AAAUE,QAAAA,QAAV;AAAoBD,QAAAA,GAApB;AAAyBE,QAAAA,UAAzB;AAAqCC,QAAAA,MAAM,EAAEZ,MAAM,CAACC;AAApD,OAAvB;AACAO,MAAAA,OAAO,GACJK,IADH,CACQC,IAAI,IAAI;AACZ,aAAKR,UAAL,CAAgBG,GAAhB,EAAqBG,MAArB,GAA8BZ,MAAM,CAACE,SAArC;;AACA,aAAKI,UAAL,CAAgBG,GAAhB,EAAqBC,QAArB,CAA8BI,IAA9B,EAAoCH,UAApC;AACD,OAJH,EAKGI,KALH,CAKSC,KAAK,IAAI;AACd,aAAKV,UAAL,CAAgBG,GAAhB,EAAqBG,MAArB,GAA8BZ,MAAM,CAACG,KAArC;AACAO,QAAAA,QAAQ,CAACM,KAAD,CAAR;AACD,OARH;AASD;AACF;;AAEDC,EAAAA,MAAM,CAACR,GAAD,EAAME,UAAN,EAAkB;AACtB,QAAI,KAAKL,UAAL,CAAgBG,GAAhB,CAAJ,EAA0B;AACxB,WAAKH,UAAL,CAAgBG,GAAhB,EAAqBE,UAArB,GAAkCA,UAAlC;AACD;AACF;;AAEDO,EAAAA,IAAI,CAACT,GAAD,EAAM;AACR,WAAO,KAAKH,UAAL,CAAgBG,GAAhB,CAAP;AACD;;AA5BiC","sourcesContent":["const STATUS = {\n  REQUESTED: 'REQUESTED',\n  COMPLETED: 'COMPLETED',\n  ERROR: 'ERROR'\n};\n\n// A helper class to manage tile metadata fetching\nexport default class I3STileManager {\n  constructor() {\n    this._statusMap = {};\n  }\n\n  add(request, key, callback, frameState) {\n    if (!this._statusMap[key]) {\n      this._statusMap[key] = {request, callback, key, frameState, status: STATUS.REQUESTED};\n      request()\n        .then(data => {\n          this._statusMap[key].status = STATUS.COMPLETED;\n          this._statusMap[key].callback(data, frameState);\n        })\n        .catch(error => {\n          this._statusMap[key].status = STATUS.ERROR;\n          callback(error);\n        });\n    }\n  }\n\n  update(key, frameState) {\n    if (this._statusMap[key]) {\n      this._statusMap[key].frameState = frameState;\n    }\n  }\n\n  find(key) {\n    return this._statusMap[key];\n  }\n}\n"],"file":"i3s-tile-manager.js"}