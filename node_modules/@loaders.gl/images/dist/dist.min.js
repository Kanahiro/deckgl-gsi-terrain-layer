!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";(function(t,r){n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return o}));const i={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==t&&t,document:"undefined"!=typeof document&&document},a=i.global||i.self||i.window,o="object"!=typeof r||"[object process]"!==String(r)||r.browser,u=void 0!==r&&r.version&&r.version.match(/v([0-9]*)/);u&&parseFloat(u[1])}).call(this,n(1),n(3))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){(function(e){const r=n(4),i="undefined"==typeof window?e:window;i.loaders=i.loaders||{},t.exports=Object.assign(i.loaders,r)}).call(this,n(1))},function(t,e){var n,r,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(t){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var c,s=[],f=!1,g=-1;function l(){f&&c&&(f=!1,c.length?s=c.concat(s):g=-1,s.length&&d())}function d(){if(!f){var t=u(l);f=!0;for(var e=s.length;e;){for(c=s,s=[];++g<e;)c&&c[g].run();g=-1,e=s.length}c=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||f||u(d)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e)}n.r(e),n.d(e,"ImageLoader",(function(){return L})),n.d(e,"ImageWriter",(function(){return k})),n.d(e,"getBinaryImageMetadata",(function(){return j})),n.d(e,"isImageTypeSupported",(function(){return f})),n.d(e,"getDefaultImageType",(function(){return g})),n.d(e,"isImage",(function(){return l})),n.d(e,"getImageType",(function(){return d})),n.d(e,"getImageSize",(function(){return m})),n.d(e,"getImageData",(function(){return m})),n.d(e,"loadImage",(function(){return _})),n.d(e,"loadImageArray",(function(){return C})),n.d(e,"loadImageCube",(function(){return z})),n.d(e,"HTMLImageLoader",(function(){return L})),n.d(e,"getSupportedImageType",(function(){return Q})),n.d(e,"isBinaryImage",(function(){return R})),n.d(e,"getBinaryImageMIMEType",(function(){return W})),n.d(e,"getBinaryImageSize",(function(){return F}));var i=n(0);const{_parseImageNode:a}=i.a,o="undefined"!=typeof Image,u="undefined"!=typeof ImageBitmap,c=Boolean(a),s=!!i.b||c;function f(t){switch(t){case"auto":return u||o||s;case"imagebitmap":return u;case"image":return o;case"data":return s;case"html":return o;case"ndarray":return s;default:throw new Error(`@loaders.gl/images: image ${t} not supported in this environment`)}}function g(){if(u)return"imagebitmap";if(o)return"image";if(s)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function l(t){return Boolean(p(t))}function d(t){const e=p(t);if(!e)throw new Error("Not an image");return e}function m(t){switch(d(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(n)return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:return r(!1)}}function p(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&t instanceof Image?"image":t&&"object"==typeof t&&t.data&&t.width&&t.height?"data":null}const h=/^data:image\/svg\+xml/,w=/\.svg((\?|#).*)?$/;function y(t){return t&&(h.test(t)||w.test(t))}function b(t,e){if(y(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function v(t,e,n){const r=function(t,e){if(y(e)){const e=(new TextDecoder).decode(t);return"data:image/svg+xml;base64,"+btoa(e)}return b(t,e)}(t,n),i=self.URL||self.webkitURL,a="string"!=typeof r&&i.createObjectURL(r);try{return await async function(t,e){const n=new Image;if(n.src=t,e.image&&e.image.decode&&n.decode)return await n.decode(),n;return await new Promise((e,r)=>{try{n.onload=()=>e(n),n.onerror=e=>r(new Error(`Could not load image ${t}: ${e}`))}catch(t){r(t)}})}(a||r,e)}finally{a&&i.revokeObjectURL(a)}}const I={};let T=!0;async function x(t,e,n){let r;if(y(n)){r=await v(t,e,n)}else r=b(t,n);const i=e&&e.imagebitmap;return await async function(t,e=null){!function(t){for(const e in t||I)return!1;return!0}(e)&&T||(e=null);if(e)try{return await createImageBitmap(t,e)}catch(t){console.warn(t),T=!1}return await createImageBitmap(t)}(r,i)}function j(t){const e=B(t);return function(t){const e=B(t);if(!(e.byteLength>=24&&2303741511===e.getUint32(0,!1)))return null;return{mimeType:"image/png",width:e.getUint32(16,!1),height:e.getUint32(20,!1)}}(e)||function(t){const e=B(t);if(!(e.byteLength>=3&&65496===e.getUint16(0,!1)&&255===e.getUint8(2)))return null;const{tableMarkers:n,sofMarkers:r}=function(){const t=new Set([65499,65476,65484,65501,65534]);for(let e=65504;e<65520;++e)t.add(e);const e=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:t,sofMarkers:e}}();let i=2;for(;i+9<e.byteLength;){const t=e.getUint16(i,!1);if(r.has(t))return{mimeType:"image/jpeg",height:e.getUint16(i+5,!1),width:e.getUint16(i+7,!1)};if(!n.has(t))return null;i+=2,i+=e.getUint16(i,!1)}return null}(e)||function(t){const e=B(t);if(!(e.byteLength>=10&&1195984440===e.getUint32(0,!1)))return null;return{mimeType:"image/gif",width:e.getUint16(6,!0),height:e.getUint16(8,!0)}}(e)||function(t){const e=B(t);if(!(e.byteLength>=14&&16973===e.getUint16(0,!1)&&e.getUint32(2,!0)===e.byteLength))return null;return{mimeType:"image/bmp",width:e.getUint32(18,!0),height:e.getUint32(22,!0)}}(e)}function B(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function U(t,e,n){const a=((e=e||{}).image||{}).type||"auto",{url:o}=n||{};let u;switch(function(t){switch(t){case"auto":case"data":return g();default:return f(t),t}}(a)){case"imagebitmap":u=await x(t,e,o);break;case"image":u=await v(t,e,o);break;case"data":u=await function(t,e){const{mimeType:n}=j(t)||{},{_parseImageNode:a}=i.a;return r(a),a(t,n,e)}(t,e);break;default:r(!1)}return"data"===a&&(u=m(u)),u}var L={id:"image",name:"Images",version:"2.3.1",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:U,tests:[t=>Boolean(j(new DataView(t)))],options:{image:{type:"auto",decode:!0}}};const{_encodeImageNode:E}=i.a;let M=!0;var k={name:"Images",extensions:["jpeg"],options:{image:{mimeType:"image/png",jpegQuality:null}},encode:async function(t,e){return(e=e||{}).image=e.image||{},E?E(t,{type:e.image.mimeType}):async function(t,e){const{mimeType:n,jpegQuality:r}=e.image,{width:i,height:a}=m(t),o=document.createElement("canvas");o.width=i,o.height=a,function(t,e,n=0,r=0){if(0===n&&0===r&&"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const n=e.getContext("bitmaprenderer");if(n)return n.transferFromImageBitmap(t),e}const i=e.getContext("2d");if(t.data){const n=new Uint8ClampedArray(t.data),r=new ImageData(n,t.width,t.height);return i.putImageData(r,0,0),e}i.drawImage(t,0,0)}(t,o);const u=await new Promise((t,e)=>{if(r&&M)try{return void o.toBlob(t,n,r)}catch(t){M=!1}o.toBlob(t,n)});return await u.arrayBuffer()}(t,e)}};let S="";const D={};function O(t,e,n){let i=t;"function"==typeof t&&(i=t({...e,...n})),r("string"==typeof i);const{baseUrl:a}=e;return a&&(i="/"===a[a.length-1]?`${a}${i}`:`${a}/${i}`),function(t){for(const e in D)if(t.startsWith(e)){const n=D[e];t=t.replace(e,n)}return t.startsWith("http://")||t.startsWith("https://")||(t=`${S}${t}`),t}(i)}async function P(t,e,n){if(Array.isArray(t))return await async function(t,e,n={}){const r=t.map(t=>P(t,e,n));return await Promise.all(r)}(t,e,n);if((r=t)&&"object"==typeof r)return await async function(t,e,n){const r=[],i={};for(const a in t){const o=P(t[a],e,n).then(t=>{i[a]=t});r.push(o)}return await Promise.all(r),i}(t,e,n);var r;const i=t;return await e(i,n)}async function $(t,e,n){return await async function(t,e,n={}){return await P(t,e,n)}(t,t=>A(t,e,n))}async function A(t,e,n){const r=await fetch(t,n.fetch),i=await r.arrayBuffer();return await e(i,n)}async function _(t,e={}){const n=await V(t,e);return await $(n,U,e)}async function V(t,e,n={}){const i=e&&e.image&&e.image.mipLevels||0;return 0!==i?await async function(t,e,n,i){const a=[];if("auto"===e){const r=O(t,n,{...i,lod:0}),o=await A(r,U,n),{width:u,height:c}=m(o);e=function({width:t,height:e}){return 1+Math.floor(Math.log2(Math.max(t,e)))}({width:u,height:c}),a.push(r)}r(e>0);for(let r=a.length;r<e;++r){const e=O(t,n,{...i,lod:r});a.push(e)}return a}(t,i,e,n):O(t,e,n)}async function C(t,e,n={}){const r=await async function(t,e,n={}){const r=[];for(let i=0;i<t;i++){const t=V(e,n,{index:i});r.push(t)}return await Promise.all(r)}(t,e,n);return await $(r,U,n)}const N=[{face:34069,direction:"right",axis:"x",sign:"positive"},{face:34070,direction:"left",axis:"x",sign:"negative"},{face:34071,direction:"top",axis:"y",sign:"positive"},{face:34072,direction:"bottom",axis:"y",sign:"negative"},{face:34073,direction:"front",axis:"z",sign:"positive"},{face:34074,direction:"back",axis:"z",sign:"negative"}];async function z(t,e={}){const n=await async function(t,e){const n={},r=[];let i=0;for(const a in N){const o=V(t,e,{...N[i],index:i++}).then(t=>{n[a]=t});r.push(o)}return await Promise.all(r),n}(t,e);return await $(n,U,e)}function R(t,e){const n=j(t);return e?Boolean(n&&n.mimeType===e):Boolean(n)}function W(t){const e=j(t);return e?e.mimeType:null}function F(t,e=null){const n=j(t);if(n)return{width:n.width,height:n.height};throw e=e||"unknown",new Error("invalid image data for type: "+e)}function Q(t=null){return g()}}])}));