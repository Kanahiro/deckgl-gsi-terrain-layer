{"version":3,"sources":["../../../../src/categories/mesh/mesh-utils.js"],"names":["getMeshSize","attributes","size","attributeName","attribute","ArrayBuffer","isView","byteLength","BYTES_PER_ELEMENT","getMeshBoundingBox","POSITION","minX","Infinity","minY","minZ","maxX","maxY","maxZ","positions","value","len","length","i","x","y","z"],"mappings":";;;;;;;;AAAO,SAASA,WAAT,CAAqBC,UAArB,EAAiC;AACtC,MAAIC,IAAI,GAAG,CAAX;;AACA,OAAK,IAAMC,aAAX,IAA4BF,UAA5B,EAAwC;AACtC,QAAMG,SAAS,GAAGH,UAAU,CAACE,aAAD,CAA5B;;AACA,QAAIE,WAAW,CAACC,MAAZ,CAAmBF,SAAnB,CAAJ,EAAmC;AAEjCF,MAAAA,IAAI,IAAIE,SAAS,CAACG,UAAV,GAAuBH,SAAS,CAACI,iBAAzC;AACD;AACF;;AACD,SAAON,IAAP;AACD;;AAGM,SAASO,kBAAT,CAA4BR,UAA5B,EAAwC;AAC7C,MAAI,CAACA,UAAD,IAAe,CAACA,UAAU,CAACS,QAA/B,EAAyC;AACvC,WAAO,IAAP;AACD;;AAED,MAAIC,IAAI,GAAGC,QAAX;AACA,MAAIC,IAAI,GAAGD,QAAX;AACA,MAAIE,IAAI,GAAGF,QAAX;AACA,MAAIG,IAAI,GAAG,CAACH,QAAZ;AACA,MAAII,IAAI,GAAG,CAACJ,QAAZ;AACA,MAAIK,IAAI,GAAG,CAACL,QAAZ;AAEA,MAAMM,SAAS,GAAGjB,UAAU,CAACS,QAAX,CAAoBS,KAAtC;AACA,MAAMC,GAAG,GAAGF,SAAS,IAAIA,SAAS,CAACG,MAAnC;;AAEA,MAAI,CAACD,GAAL,EAAU;AACR,WAAO,IAAP;AACD;;AAED,OAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,GAApB,EAAyBE,CAAC,IAAI,CAA9B,EAAiC;AAC/B,QAAMC,CAAC,GAAGL,SAAS,CAACI,CAAD,CAAnB;AACA,QAAME,CAAC,GAAGN,SAAS,CAACI,CAAC,GAAG,CAAL,CAAnB;AACA,QAAMG,CAAC,GAAGP,SAAS,CAACI,CAAC,GAAG,CAAL,CAAnB;AAEAX,IAAAA,IAAI,GAAGY,CAAC,GAAGZ,IAAJ,GAAWY,CAAX,GAAeZ,IAAtB;AACAE,IAAAA,IAAI,GAAGW,CAAC,GAAGX,IAAJ,GAAWW,CAAX,GAAeX,IAAtB;AACAC,IAAAA,IAAI,GAAGW,CAAC,GAAGX,IAAJ,GAAWW,CAAX,GAAeX,IAAtB;AAEAC,IAAAA,IAAI,GAAGQ,CAAC,GAAGR,IAAJ,GAAWQ,CAAX,GAAeR,IAAtB;AACAC,IAAAA,IAAI,GAAGQ,CAAC,GAAGR,IAAJ,GAAWQ,CAAX,GAAeR,IAAtB;AACAC,IAAAA,IAAI,GAAGQ,CAAC,GAAGR,IAAJ,GAAWQ,CAAX,GAAeR,IAAtB;AACD;;AACD,SAAO,CAAC,CAACN,IAAD,EAAOE,IAAP,EAAaC,IAAb,CAAD,EAAqB,CAACC,IAAD,EAAOC,IAAP,EAAaC,IAAb,CAArB,CAAP;AACD","sourcesContent":["export function getMeshSize(attributes) {\n  let size = 0;\n  for (const attributeName in attributes) {\n    const attribute = attributes[attributeName];\n    if (ArrayBuffer.isView(attribute)) {\n      // @ts-ignore DataView doesn't have BYTES_PER_ELEMENT\n      size += attribute.byteLength * attribute.BYTES_PER_ELEMENT;\n    }\n  }\n  return size;\n}\n\n// eslint-disable-next-line complexity\nexport function getMeshBoundingBox(attributes) {\n  if (!attributes || !attributes.POSITION) {\n    return null;\n  }\n\n  let minX = Infinity;\n  let minY = Infinity;\n  let minZ = Infinity;\n  let maxX = -Infinity;\n  let maxY = -Infinity;\n  let maxZ = -Infinity;\n\n  const positions = attributes.POSITION.value;\n  const len = positions && positions.length;\n\n  if (!len) {\n    return null;\n  }\n\n  for (let i = 0; i < len; i += 3) {\n    const x = positions[i];\n    const y = positions[i + 1];\n    const z = positions[i + 2];\n\n    minX = x < minX ? x : minX;\n    minY = y < minY ? y : minY;\n    minZ = z < minZ ? z : minZ;\n\n    maxX = x > maxX ? x : maxX;\n    maxY = y > maxY ? y : maxY;\n    maxZ = z > maxZ ? z : maxZ;\n  }\n  return [[minX, minY, minZ], [maxX, maxY, maxZ]];\n}\n"],"file":"mesh-utils.js"}