import { getFetchFunction } from './option-utils';
export function getLoaderContext(context, options, previousContext = null) {
  if (previousContext) {
    return previousContext;
  }

  context = {
    fetch: getFetchFunction(options || {}, context),
    ...context
  };

  if (!Array.isArray(context.loaders)) {
    context.loaders = null;
  }

  return context;
}
export function getLoaders(loaders, context) {
  if (!context && loaders && !Array.isArray(loaders)) {
    return loaders;
  }

  let candidateLoaders;

  if (loaders) {
    candidateLoaders = Array.isArray(loaders) ? loaders : [loaders];
  }

  if (context && context.loaders) {
    const contextLoaders = Array.isArray(context.loaders) ? context.loaders : [context.loaders];
    candidateLoaders = candidateLoaders ? [...candidateLoaders, ...contextLoaders] : contextLoaders;
  }

  return candidateLoaders && candidateLoaders.length ? candidateLoaders : null;
}
//# sourceMappingURL=context-utils.js.map